<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html><head><title>DSL Syllabus</title>


<link rel="stylesheet" href="PS_Lecture.css"></head><body>
<!-- Site navigation menu -->
<ul class="navbar">
<li><a href="PS_DSL_Lecture_01.html">Lecture 1</a></li>
<li><a href="PS_DSL_Lecture_02.html">Lecture 2</a></li>
<li><a href="PS_DSL_Lecture_03.html">Lecture 3</a></li>
<li><a href="PS_DSL_Lecture_04.html">Lecture 4</a></li>
<li><a href="PS_DSL_Lecture_05.html">Lecture 5</a></li>
<li><a href="PS_DSL_Lecture_06.html">Lecture 6</a></li>
<li><a href="PS_DSL_Lecture_07.html">Lecture 7</a></li>
<li><a href="PS_DSL_Lecture_08.html">Lecture 8</a></li>
<li><a href="PS_DSL_Lecture_09.html">Lecture 9</a></li>
<li><a href="PS_DSL_Lecture_10.html">Lecture 10</a></li>
</ul>
<!-- Main content -->
<h1>Groovy Overview<br>
</h1>
<p>"Groovy is an agile and dynamic language for the Java Virtual Machine" (taken from groovy website)<br>

</p>
<p>Dynamic extension to Java Languare</p>
<ul>
  <li>Dynamic typing</li>
  <li>Closures (code as object)</li>
  <li>Meta Object Protocol (MOP)<br>
  </li>
</ul>

<p>Runs on Java Virtual Machine</p>
<ul>
  <li>version 1.4+<br>
  </li>
</ul>
<p>JSR-241</p>
<ul>
  <li>Groovy language standard (inactive status)</li>
</ul>
<br>
<hr style="width: 100%; height: 2px;">
<h1>What is Groovy Good For?</h1>
Scripting<br>
<ul>
  <li>source file appears to be executed</li>
</ul>
Prototyping<br>
<ul>
  <li>&nbsp; rapid experiments</li>
</ul>
Testing Java code<br>
<ul>
  <li>spock framework</li>
</ul>
Web Applications<br>
<ul>
  <li>building (Grails)</li>
  <li>testing (Geb)</li>
</ul>
Embedded Scripting Language<br>
<br>
Domain Specific Language (DSL)<br>
<hr style="width: 100%; height: 2px;">
<h1>What is Groovy Really Good For?</h1>
<big><big>Writing Less Code!</big></big><br>
<br>
&lt;show demos?&gt;&nbsp; OR &lt;insert demo code?&gt;<br>
<hr style="width: 100%; height: 2px;">
<h1>Static vs. Dynamic</h1>
<br>
<table style="text-align: left; width: 753px; height: 193px;" border="1" cellpadding="2" cellspacing="2">
  <tbody>
    <tr>
      <td style="vertical-align: top; text-align: center;">Java<br>
      </td>
      <td style="vertical-align: top; text-align: center;">&nbsp;Groovy<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">Compile time type checking<br>
      </td>
      <td style="vertical-align: top;">Runtime type checking<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">Syntactic verbosity<br>
      </td>
      <td style="vertical-align: top;">Syntactic conciseness<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">Rigid API Frameworks (JEE)<br>
      </td>
      <td style="vertical-align: top;">Flexible frameworks (Grails), DSLs, scripting<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">IDE autocompletion<br>
      </td>
      <td style="vertical-align: top;">Minor autocompletion<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">IDE refactoring support<br>
      </td>
      <td style="vertical-align: top;">Minor refactoring support<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">High performance<br>
      </td>
      <td style="vertical-align: top;">Low performance<br>
      </td>
    </tr>
  </tbody>
</table>
<br>
Groovy is dynamic<br>
<ul>
  <li>Groovy's bytecode generator generates different content than the Java compiler</li>
  <li>Example:&nbsp; call on method 'foo()' is indirect</li>
</ul>
<span style="font-family: Courier New,Courier,monospace;">getMetaClass().invokeMethod(this,"foo", EMPTY_PARAMS_ARRAY)</span><br>
<p>Inefficient? Yes, but...<br>
</p>
<ul>
  <li>computers are very fast</li>
  <li>Groovy is being optimized</li>
  <li>humans think s-l-o-w-l-y</li>
  <li>you can rewrite in Java (or assembler)</li>
</ul>
Dynamic nature permits the addition of properties and methods<br>
<hr style="width: 100%; height: 2px;">
<h1>Groovy Language Overview</h1>
Every Groovy type is a subtype of <span style="font-family: Courier New,Courier,monospace;">java.lang.Object</span><br>
<ul>
  <li>no primitive types, everything is an object</li>
</ul>
All operators are method calls<br>
<ul>
  <li>Question: what does this imply about the == operator?</li>
</ul>
Groovy and Java similarities<br>
<ul>
  <li>general packaging mechanism</li>
  <li>statements (except <span style="font-family: Courier New,Courier,monospace;">do..while</span>)</li>
  <li>class and method definitions (no nested classes)</li>
  <li>operators, expressions. assignments</li>
  <li>exception handling</li>
  <li>object instantiation, referencing and dereferencing objects</li>
  <li>calling methods<br>
  </li>
</ul>
Groovy automatic imports<br>
<ul style="font-family: Courier New,Courier,monospace;">
  <li>groovy.lang.*</li>
  <li>groovy.util.*</li>
  <li>java.lang.*</li>
  <li>java.util.*</li>
  <li>java.net.*</li>
  <li>java.io.*</li>
  <li>java.math.BigDecimal</li>
  <li>java.math.BigInteger</li>
</ul>
Example<br>
<span style="font-family: Courier New,Courier,monospace;">java.net.URLEncoder("a b")</span>&nbsp;&nbsp; // Java<br>
<span style="font-family: Courier New,Courier,monospace;">URLEncoder("a b")</span>&nbsp; // Groovy<br>
<br>
== operator calls "equals()" method on objects<br>
<ul>
  <li>Groovy tests for value equality</li>
  <li>Java tests for reference equality</li>
</ul>
Assertions<br>
<ul>
  <li><span style="font-family: Courier New,Courier,monospace;">assert </span>is a first class statement in Groovy and is always active</li>
  <li>Java requires a runtime option to activate <span style="font-family: Courier New,Courier,monospace;">assert</span> statements</li>
  <li>this has nothing to do with JUnit assertions</li>
</ul>
Groovy Truth<br>
<br>
<table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">
  <tbody>
    <tr>
      <td style="vertical-align: top;">Runtype type<br>
      </td>
      <td style="vertical-align: top;">Evaluation criteria for truth<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">Boolean<br>
      </td>
      <td style="vertical-align: top;">boolean value is 'true'<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">Matcher<br>
      </td>
      <td style="vertical-align: top;">matcher has a match<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">Collection<br>
      </td>
      <td style="vertical-align: top;">collection is non-empty<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">String, GString<br>
      </td>
      <td style="vertical-align: top;">string is non-empty<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">Number, Character<br>
      </td>
      <td style="vertical-align: top;">value is non-zero<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">None of the above<br>
      </td>
      <td style="vertical-align: top;">object reference is non-null<br>
      </td>
    </tr>
  </tbody>
</table>
<br>
String literals<br style="font-family: Courier New,Courier,monospace;">
<ul style="font-family: Courier New,Courier,monospace;">
  <li>'abc'&nbsp; // similar to Java string</li>
  <li>"abc"&nbsp; // GString - supports variable interpolation</li>
  <li>/abc/&nbsp; // slashy string - good for regular expressions</li>
</ul>
Extended strings (here documents)<br>
<br>
<span style="font-family: Courier New,Courier,monospace;">"""Four score and seven years ago</span><br style="font-family: Courier New,Courier,monospace;">
<span style="font-family: Courier New,Courier,monospace;">our fathers brought forth on this continent<br>
...</span><span style="font-family: Courier New,Courier,monospace;">"""</span><br>
<br>
GString<br>
<ul>
  <li>string enclosed in double quotes</li>
  <li>permits substitution of variable's value</li>
  <li>Example: <span style="font-family: Courier New,Courier,monospace;">"The winning number is $n"</span></li>
</ul>
Regular expression<br>
<ul>
  <li>string bounded by forward slashes</li>
  <li>interpreted as regex in context</li>
  <li>Example: <span style="font-family: Courier New,Courier,monospace;">assert '12345' =~ /\d+/</span></li>
</ul>
Numbers are objects<br>
<span style="font-family: Courier New,Courier,monospace;"></span><br>
<span style="font-family: Courier New,Courier,monospace;">int x = 1</span><br style="font-family: Courier New,Courier,monospace;">
<span style="font-family: Courier New,Courier,monospace;">assert x instanceof Integer</span><br style="font-family: Courier New,Courier,monospace;">
<br>
Groovy has its own coercion rules<br>
<ul>
  <li>similar but different from Java (more natural)</li>
</ul>
<span style="font-family: Courier New,Courier,monospace;">def x = 1/2</span><br style="font-family: Courier New,Courier,monospace;">
<span style="font-family: Courier New,Courier,monospace;">assert x instanceof BigDecimal</span><br style="font-family: Courier New,Courier,monospace;">
<span style="font-family: Courier New,Courier,monospace;">assert x == new BigDecimal(0.5)</span><br style="font-family: Courier New,Courier,monospace;">
<br>
Lists<br>
<ul>
  <li>similar to array literal but bounded by square brackets</li>
  <li>instances of <span style="font-family: Courier New,Courier,monospace;">java.util.ArrayList</span></li>
  <li>Example:&nbsp; <span style="font-family: Courier New,Courier,monospace;">['I','II','III','IV','V','VI','VII','VIII','IX','X']</span></li>
</ul>
Maps<br>
<ul>
  <li>key/value bindings</li>
  <li>similar to list but : separates key and value</li>
  <li>instances of TBD</li>
  <li>Example:&nbsp; <span style="font-family: Courier New,Courier,monospace;">[100:'CONTINUE',200:'OK',300:'BAD REQUEST']</span></li>
</ul>
Ranges<br>
<ul>
  <li>language literal and language class</li>
  <li>Example: <span style="font-family: Courier New,Courier,monospace;">def x = 1..10</span></li>
</ul>
Groovy for loop<br>
<ul>
  <li>loop over anything that can be iterated (e.g. list, map, range)</li>
  <li>Example:&nbsp; <span style="font-family: Courier New,Courier,monospace;">for (x in coll) { println i }&nbsp; // block</span> <br>
  </li>
</ul>
Closures<br>
<ul>
  <li>code as objects</li>
  <li>list of statements between curly brackets</li>
  <li>acts like a "callback"&nbsp; when used during iteration</li>
  <li>Example:&nbsp; <br>
  </li>
</ul>
<span style="font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp; def r = [1,2,3,4,5]</span><br style="font-family: Courier New,Courier,monospace;">
<span style="font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp; r.each { println 2 * it }&nbsp; // closure</span><br style="font-family: Courier New,Courier,monospace;">
<br>
Checked exceptions<br>
<ul>
  <li>don't have to be caught as they are mapped to <span style="font-family: monospace;">RunTimeException</span></li>
  <li>can still use <span style="font-family: Courier New,Courier,monospace;">try / catch / finally</span> if desired</li>
</ul>
Syntactic sugar<br>
<br>
<table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">
  <tbody>
    <tr>
      <td style="vertical-align: top;">Operator<br>
      </td>
      <td style="vertical-align: top;">Name<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">?.<br>
      </td>
      <td style="vertical-align: top;">null-safe operator (safe object dereference)<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">?:<br>
      </td>
      <td style="vertical-align: top;">Elvis operator<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">*.<br>
      </td>
      <td style="vertical-align: top;">spread-dot operator<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">&lt;=&gt;<br>
      </td>
      <td style="vertical-align: top;">spaceship operator (calls 'compareTo()' )<br>
      </td>
    </tr>
  </tbody>
</table>
<br>
Less syntax<br>
<ul>
  <li>semicolons are optional</li>
  <li>return statement optional</li>
</ul>
Groovy Bean (or Plain Old Groovy Object)<br>
<ul>
  <li>a Java Bean defined in Groovy</li>
  <li>must have a default constructor</li>
  <li>Groovy generates public getters/setters</li>
  <li>Groovy translates property references to getter/setter calls</li>
  <li>Bean instantiation has special syntax</li>
</ul>
<ul>
  <ul>
    <li>looks like a constructor call but uses a names list of arguments</li>
    <li>default constructor called</li>
    <li>property values are set</li>
  </ul>
</ul>
<ul>
  <li>Example</li>
</ul>
<span style="font-family: Courier New,Courier,monospace;">import java.text.SimpleDateFormat</span><br style="font-family: Courier New,Courier,monospace;">
<span style="font-family: Courier New,Courier,monospace;">import java.text.NumberFormat</span><br style="font-family: Courier New,Courier,monospace;">
<span style="font-family: Courier New,Courier,monospace;">def format = new SimpleDateFormat (</span><br style="font-family: Courier New,Courier,monospace;">
<span style="font-family: Courier New,Courier,monospace;">&nbsp; lenient: false,</span><br style="font-family: Courier New,Courier,monospace;">
<span style="font-family: Courier New,Courier,monospace;">&nbsp; numberFormat: NumberFormat.getIntegerInstance(),</span><br style="font-family: Courier New,Courier,monospace;">
<span style="font-family: Courier New,Courier,monospace;">&nbsp; timeZone: TimeZone.getTimeZone('EST')</span><br style="font-family: Courier New,Courier,monospace;">
<span style="font-family: Courier New,Courier,monospace;">)</span><br>
<br>
<br>
<br>
<p><br>
</p>

<address><br>
by R Rodini.</address>
</body></html>